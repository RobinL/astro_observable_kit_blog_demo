<!DOCTYPE html>
<html>
<head>
  <title>hello-world-diff-demo</title>
</head>
<body>
<notebook>

<script type="module" data-name="one">
const one = view(Inputs.text({label: "Text 1", value: "Hello World"}));
({ one })
</script>

<script type="module" data-name="other">
const other = view(Inputs.text({label: "Text 2", value: "Hello Observable"}));
({ other })
</script>

<script type="module" data-name="out">
import {diff_match_patch} from "npm:diff-match-patch";

const dmp = new diff_match_patch();
const diffs = dmp.diff_main(one, other);
dmp.diff_cleanupSemantic(diffs);

const diffHtml = diffs.map(([op, text]) => {
  const color = op === 1 ? 'green' : op === -1 ? 'red' : 'black';
  const bg = op === 1 ? '#e6ffe6' : op === -1 ? '#ffe6e6' : 'transparent';
  return `<span style="color: ${color}; background: ${bg}; padding: 2px 4px;">${text}</span>`;
}).join('');

const out = document.createElement('div');
out.style.fontFamily = 'monospace';
out.style.padding = '10px';
out.innerHTML = diffHtml;

display(out);
</script>

</notebook>
</body>
</html>
